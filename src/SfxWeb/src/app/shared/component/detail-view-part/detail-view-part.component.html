<div class="table-responsive">
    <div *ngIf="resolvedData">
        <!-- {{resolvedData | json}} -->
        <table class="table detail-table detail-list" [ngClass]="{ 'table-layout-fixed': !noFixedLayout }" role="presentation">
<!-- 
            <tbody *ngFor="(name, value) in resolvedData | keyvalue" -->
            <tbody *ngFor="let item of resolvedData | keyvalue : asIsOrder"
                [ngSwitch]="getResolvedPropertyType(item.value)" style="border-top: 0px solid;">
                <!-- Render simple property (one row) -->
                <tr *ngSwitchCase="'Value'">
                    <!-- Render property name -->
                    <th [title]="item.key">
                        {{item.key}}
                    </th>

                    <!-- Render simple property value -->
                    <td [title]="item.value">{{item.value}}</td>
                </tr>

                <!-- Render html property (one row) -->
                <tr *ngSwitchCase="'Html'">
                    <!-- Render property name -->
                    <th [title]="item.key">
                        {{item.key}}
                    </th>

                    <!-- Render simple property value -->
                    <td [innerHtml]="item.value"></td>
                </tr>

                <!-- Render object property (two rows) -->
                <tr *ngIf="title">
                    <!-- Render sub-object title in the first line -->
                    <th colspan="2" class="sub-title" [title]="title">
                        {{title}}
                    </th>
                </tr>
                <tr *ngSwitchCase="'Object'">
                    <td colspan="2">
                        <h4 class="sub-title" [title]="title" style="text-transform: none;" >{{item.key}} </h4>
                        <div class="nested-table-container">
                            <app-detail-view-part [data]="item.value" [noFixedLayout]="noFixedLayout"></app-detail-view-part>
                        </div>
                    </td>
                </tr>

                <tr *ngSwitchCase="'Array'">
                    <th colspan="2">
                        <h4 class="sub-title" [title]="title" style="text-transform: none;">{{item.key}} </h4>
                        <div class="table-responsive">
                            <div class="nested-table-container">
                                <!-- Set table-layout to be fixed only when they have only 1 or 2 properties -->
                                <table class="table detail-table nested-table-border" [ngClass]="{ 'table-layout-fixed': !noFixedLayout && getResolvedObjectSize(item.value[0]) <= 3 }">
                                    <thead>
                                        <tr class="nested-table-border">
                                            <!-- Render sub-array table header -->
                                            <th *ngFor="let subItem of item.value[0] | keyvalue : asIsOrder" [title]="subItem.key">
                                                {{subItem.key}}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of item.value; let $last = last;"  [ngClass]="{ 'nested-table-border': !($last) }">
                                                <!-- Render sub-array table body, assuming the properties are always simple properties rather than object -->
                                            <td *ngFor="let subItem of item | keyvalue" [ngSwitch]="getResolvedPropertyType(subItem.value)">
                                                <span *ngSwitchCase="'Value'" [title]="subItem.value">{{subItem.value}}</span>
                                                <span *ngSwitchCase="'Html'" [innerHtml]="subItem.value"></span>
                                                <app-detail-view-part *ngSwitchCase="'Array'" [data]="subItem.value"></app-detail-view-part>
                                                <app-detail-view-part *ngSwitchCase="'Object'" [data]="subItem.value"></app-detail-view-part>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </th>
                </tr>

            </tbody>

        </table>
    </div>
    <script type="text/ng-template" id="view-part-array-template">
        <div class="table-responsive">
            <div class="nested-table-container">
                <!-- Set table-layout to be fixed only when they have only 1 or 2 properties -->
                <table class="table detail-table nested-table-border" ng-class="{ 'table-layout-fixed': !noFixedLayout && ctrl.getResolvedObjectSize(value[0]) <= 3 }">
                    <thead>
                        <tr class="nested-table-border">
                            <!-- Render sub-array table header -->
                            <th ng-repeat="(subName, subValue) in ::value[0] track by subName" title="{{::subName}}">
                                {{::subName}}
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in value"  ng-class="{ 'nested-table-border': !($last) }">
                                <!-- Render sub-array table body, assuming the properties are always simple properties rather than object -->
                            <td ng-repeat="(subName, subValue) in item track by subName" ng-switch="::ctrl.getResolvedPropertyType(subValue)">
                                <span ng-switch-when="Value" title="{{subValue}}">{{subValue}}</span>
                                <span ng-switch-when="Html" ng-bind-html="subValue"></span>
                                <div ng-switch-when="Array" sfx-include src="'view-part-array-template'" ng-init="value = subValue"></div>
                                <sfx-detail-view-part ng-switch-when="Object" data="subValue" no-fixed-layout="$parent.noFixedLayout"></sfx-detail-view-part>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </script>
</div>