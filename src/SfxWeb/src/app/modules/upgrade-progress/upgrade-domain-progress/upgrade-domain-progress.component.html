<app-collapse-container *ngFor="let node of upgradeDomain.NodeUpgradeProgressList" 
    collapsed="true" style="margin-bottom: 5px; border-bottom: 1px solid gray;">
    <div collapse-header>
        <div style="font-size: medium;">
            {{node.NodeName}} - {{node.UpgradePhase}}

            <div style="float: right">
                Safety Checks : {{node.PendingSafetyChecks.length}}
            </div>
        </div>
    </div>
    <div collapse-body class="collapse-inner-bar">
        <table class="table detail-list" style="width: 100%">
            <thead>
            <tr>
                <th>
                    Partition Id
                </th>
                <th>
                    Phase
                </th>
                <th></th>
            </tr>
            </thead>
            <tbody>
                <tr *ngFor="let check of node.PendingSafetyChecks">
                    <td>
                        {{check.SafetyCheck?.PartitionId}}
                    </td>
            
                    <td>
                        {{check.SafetyCheck.Kind}}
                    </td>
            
                    <td>
                        <div *ngIf="partitions[check.SafetyCheck.PartitionId]; else elseBlock">
                            <app-partition-info [partitionInfo]="partitions[check.SafetyCheck.PartitionId]"></app-partition-info>
                        </div>

                        <ng-template #elseBlock>
                            <button (click)="getPartitionInfo(check.SafetyCheck.PartitionId)" class="simple-button" *ngIf="check.SafetyCheck.PartitionId">
                                Get Info
                            </button>
                        </ng-template>
                    </td>
                </tr>
            </tbody>        
        </table>
    </div>
</app-collapse-container>

<table class="table detail-list" style="width: 100%">
    <thead>
    <tr>
        <th>
            Node
        </th>
        <th>
            Phase
        </th>
        <th>
            Safety Checks Pending
        </th>
    </tr>
    </thead>
    <tbody>
        <tr *ngFor="let node of upgradeDomain.NodeUpgradeProgressList">
            <td>
                {{node.NodeName}}
            </td>
            <td>
                {{node.UpgradePhase}}
            </td>
            <td>
                {{node.PendingSafetyChecks.length}}
            </td>
        </tr>
    </tbody>        
</table>